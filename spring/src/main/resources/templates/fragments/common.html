<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" >
<head th:fragment="head(title)">
    <meta charset="UTF-8">
    <!--Bootstrap    -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
</head>

<body>
<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top" th:fragment="menu(menu)">
    <a class="navbar-brand" href="/">Spring boot Service</a>
    <div class="collapse navbar-collapse" id="navbarStatus" sec:authorize="isAuthenticated()">
        <p class="text-light" th:text="|${principal.username}님 환영합니다.|"></p>
        <p class="text-light" th:text="|현재 ${principal.username} 님의 권한 : ${role}|"></p>
        <ul>
            <li class="text-light" th:text="|session.getId = ${#session.getId()}|"></li>
            <li class="text-light" th:text="|session.getAttributeNames = ${#session.getAttributeNames()}|"></li>
            <li class="text-light" th:text="|session.getCreationTime = ${#session.getCreationTime()}|"></li>
        </ul>
    </div>
    <div class="collapse navbar-collapse" id="navbarMenus">
        <a th:href="@{/registry}">
            <button sec:authorize="!isAuthenticated()" class="btn btn-lg btn-secondary">회원가입</button>
        </a>
        <a th:href="@{/login}">
            <button sec:authorize="!isAuthenticated()" class="btn btn-lg btn-dark">로그인</button>
        </a>
        <a th:href="@{/logout}">
            <button sec:authorize="isAuthenticated()" class="btn btn-danger btn-lg">로그아웃</button>
        </a>

        <a class="btn btn-secondary mr-2 my-2 my-sm-0" th:href="@{/admin/home}"><button class="btn btn-lg btn-dark">ADMIN page 접근 </button></a>
        <a class="btn btn-secondary my-2 my-sm-0" th:href="@{/manager/home}"><button class="btn btn-lg btn-dark">MANAGER page 접근</button></a>
    </div>
</nav>
</body>

</html>